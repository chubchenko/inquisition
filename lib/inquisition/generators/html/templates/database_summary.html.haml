!!!
%html{:lang => "en"}
  %head
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %meta{:charset => "utf-8"}/
    %meta{:content => "IE=edge", "http-equiv" => "X-UA-Compatible"}/
    %meta{:content => "width=device-width, initial-scale=1", :name => "viewport"}/
    %link{:href => "images/favicon.ico", :rel => "icon", :type => "image/ico"}/
    %title Code Auditor!
    %link{:href => "assets/css/bootstrap/dist/css/bootstrap.min.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/font-awesome/css/font-awesome.min.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/nprogress/nprogress.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/iCheck/skins/flat/green.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/jqvmap/dist/jqvmap.min.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/bootstrap-daterangepicker/daterangepicker.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/custom.css", :rel => "stylesheet"}/
    %link{:href => "assets/css/percircle.css", :rel => "stylesheet"}/
  %body.nav-md
    .container.body
      .main_container
        .col-md-3.left_col
          .left_col.scroll-view
            .navbar.nav_title{:style => "border: 0;"}
              %a.site_title{:href => "index.html"}
                %i.fa.fa-paw
                %span Code Auditor!
            .clearfix
            .profile.clearfix
              .profile_pic
                %img.img-circle.profile_img{:alt => "...", :src => "images/img.jpg"}/
            %br/
            #sidebar-menu.main_menu_side.hidden-print.main_menu
              .menu_section
                %h3 Reports
                %ul.nav.side-menu
                  - menu_items.each do |item_name, properties|
                    %li
                      %a
                        %i.fa.fa-desktop>
                        = item_name
                        %span.fa.fa-chevron-down
                      - if(properties[:child_items] && properties[:child_items].any?)
                        %ul.nav.child_menu
                          - properties[:child_items].each do |child_item|
                            %li
                              %a{:href => "#{child_item[:link]}"}
                                = child_item[:item_name]
            / /sidebar menu
            / /menu footer buttons
            .sidebar-footer.hidden-small
              %a{"data-placement" => "top", "data-toggle" => "tooltip", :title => "Settings"}
                %span.glyphicon.glyphicon-cog{"aria-hidden" => "true"}
              %a{"data-placement" => "top", "data-toggle" => "tooltip", :title => "FullScreen"}
                %span.glyphicon.glyphicon-fullscreen{"aria-hidden" => "true"}
              %a{"data-placement" => "top", "data-toggle" => "tooltip", :title => "Lock"}
                %span.glyphicon.glyphicon-eye-close{"aria-hidden" => "true"}
              %a{"data-placement" => "top", "data-toggle" => "tooltip", :href => "login.html", :title => "Logout"}
                %span.glyphicon.glyphicon-off{"aria-hidden" => "true"}
        .top_nav
          .nav_menu
            %nav
              .nav.toggle
                %a#menu_toggle
                  %i.fa.fa-bars
              %ul.nav.navbar-nav.navbar-right
                %li
                  %a.user-profile{:class => "aria-expanded=", :false => "", :href => "javascript:;"}
                    %i.fa.fa-envelope-o
                    = succeed "code_auditor@rubygarage.org" do
                      %img{:alt => "", :src => "images/img.jpg"}/
        .right_col{:role => "main"}
          .row.tile_count
            .col-md-2.col-sm-4.col-xs-6.tile_stats_count
              %span.count_top
                %i.fa.fa-user
                Tables
              .count= presenter.tables_count
            .col-md-2.col-sm-4.col-xs-6.tile_stats_count
              %span.count_top
                %i.fa.fa-user
                Errors
              .count= presenter.total_errors
            .col-md-2.col-sm-4.col-xs-6.tile_stats_count
              %span.count_top
                %i.fa.fa-user
                Included linters
              .count= presenter.included_linters_count
          %br/
          .row
            .col-md-12.col-sm-12.col-xs-12
              .x_panel.tile.fixed_height_320
                .x_title
                  %h2 Errors summary in percents
                  .clearfix
                .x_content.row
                  .col-md-3.col-sm-3.col-xs-12{ style: "text-align:center" }
                    %h4 Tables with repeated indexes
                    #repeated-indexes-percent.custom-circles{"data-percent" => "#{presenter.repeated_indexes_percentage}"}
                  .col-md-3.col-sm-3.col-xs-12{ style: "text-align:center" }
                    %h4 Tables with missing foreign keys
                    #missing-foreign-keys-percent.custom-circles{"data-percent" => "#{presenter.missing_foreign_keys_percentage}"}
                  .col-md-3.col-sm-3.col-xs-12{ style: "text-align:center" }
                    %h4 Incompatibility tables structure with models
                    #incompatibility-structure-percent.custom-circles{"data-percent" => "#{presenter.incompatibility_structure_with_models_percentage}"}
                  .col-md-3.col-sm-3.col-xs-12{ style: "text-align:center" }
                    %h4 Unindexed foreign keys
                    #unindexed-foreign-keys-percent.custom-circles{"data-percent" => "#{presenter.unindexed_foreign_keys_percentage}"}
          .row
            .col-md-6.col-sm-6.col-xs-12
              .x_panel.tile.fixed_height_320
                .x_title
                  %h2 Top 5 tables with errors
                  .clearfix
                .x_content
                  %h4 Tables summary
                  - presenter.top_tables_with_errors(5).each do |error|
                    .widget_summary
                      .w_left.w_25
                        %span= error[:table_name]
                      .w_center.w_55
                        .progress
                          .progress-bar.bg-green{"aria-valuemax" => "#{error[:total_errors]}", "aria-valuemin" => "0", "aria-valuenow" => "#{error[:error_count]}", :role => "progressbar", :style => "width: #{error[:error_count]}%;"}
                      .w_right.w_20
                        %span= error[:error_count]
                      .clearfix
            .col-md-6.col-sm-6.col-xs-12
              .x_panel.tile.fixed_height_320.overflow_hidden
                .x_title
                  %h2 Most populate errors
                  .clearfix
                .x_content
                  %table{:style => "width:100%"}
                    %tr
                      %th{:style => "width:37%;"}
                        %p Top 5
                      %th
                        .col-lg-7.col-md-7.col-sm-7.col-xs-7
                          %p Error
                        .col-lg-5.col-md-5.col-sm-5.col-xs-5
                          %p Tables
                    %tr
                      %td
                        %canvas#most_populars_errors{:height => "140", :style => "margin: 15px 10px 10px 0", :width => "140"}
                      %td
                        %table.tile_info
                          - presenter.top_types_of_errors(5).each do |error|
                            %tr
                              %td
                                %p
                                  %i.fa.fa-square{class: "#{error[:chart_color]}"}>
                                  = error[:error_name]
                              %td= error[:tables_count]
          .row
            .col-md-4.col-sm-4.col-xs-12
              .x_panel.tile.fixed_height_320
                .x_title
                  %h2 Quick Settings
                  %ul.nav.navbar-right.panel_toolbox
                    %li
                      %a.collapse-link
                        %i.fa.fa-chevron-up
                    %li.dropdown
                      %a.dropdown-toggle{"aria-expanded" => "false", "data-toggle" => "dropdown", :href => "#", :role => "button"}
                        %i.fa.fa-wrench
                      %ul.dropdown-menu{:role => "menu"}
                        %li
                          %a{:href => "#"} Settings 1
                        %li
                          %a{:href => "#"} Settings 2
                    %li
                      %a.close-link
                        %i.fa.fa-close
                  .clearfix
                .x_content
                  .dashboard-widget-content
                    %ul.quick-list
                      %li
                        %i.fa.fa-calendar-o
                        %a{:href => "#"} Settings
                      %li
                        %i.fa.fa-bars
                        %a{:href => "#"} Subscription
                      %li
                        %i.fa.fa-bar-chart
                        %a{:href => "#"} Auto Renewal
                      %li
                        %i.fa.fa-line-chart
                        %a{:href => "#"} Achievements
                      %li
                        %i.fa.fa-bar-chart
                        %a{:href => "#"} Auto Renewal
                      %li
                        %i.fa.fa-line-chart
                        %a{:href => "#"} Achievements
                      %li
                        %i.fa.fa-area-chart
                        %a{:href => "#"} Logout
          .row
            .col-md-4.col-sm-4.col-xs-12
              .x_panel
                .x_title
                  %h2
                    Recent Activities
                    %small Sessions
                  %ul.nav.navbar-right.panel_toolbox
                    %li
                      %a.collapse-link
                        %i.fa.fa-chevron-up
                    %li.dropdown
                      %a.dropdown-toggle{"aria-expanded" => "false", "data-toggle" => "dropdown", :href => "#", :role => "button"}
                        %i.fa.fa-wrench
                      %ul.dropdown-menu{:role => "menu"}
                        %li
                          %a{:href => "#"} Settings 1
                        %li
                          %a{:href => "#"} Settings 2
                    %li
                      %a.close-link
                        %i.fa.fa-close
                  .clearfix
                .x_content
                  .dashboard-widget-content
                    %ul.list-unstyled.timeline.widget
                      %li
                        .block
                          .block_content
                            %h2.title
                              %a Who Needs Sundance When You’ve Got Crowdfunding?
                            .byline
                              %span 13 hours ago
                              by
                              %a Jane Smith
                            %p.excerpt
                              Film festivals used to be do-or-die moments for movie makers. They were where you met the producers that could fund your project, and if the buyers liked your flick, they’d pay to Fast-forward and…
                              %a Read More
                      %li
                        .block
                          .block_content
                            %h2.title
                              %a Who Needs Sundance When You’ve Got Crowdfunding?
                            .byline
                              %span 13 hours ago
                              by
                              %a Jane Smith
                            %p.excerpt
                              Film festivals used to be do-or-die moments for movie makers. They were where you met the producers that could fund your project, and if the buyers liked your flick, they’d pay to Fast-forward and…
                              %a Read More
                      %li
                        .block
                          .block_content
                            %h2.title
                              %a Who Needs Sundance When You’ve Got Crowdfunding?
                            .byline
                              %span 13 hours ago
                              by
                              %a Jane Smith
                            %p.excerpt
                              Film festivals used to be do-or-die moments for movie makers. They were where you met the producers that could fund your project, and if the buyers liked your flick, they’d pay to Fast-forward and…
                              %a Read More
                      %li
                        .block
                          .block_content
                            %h2.title
                              %a Who Needs Sundance When You’ve Got Crowdfunding?
                            .byline
                              %span 13 hours ago
                              by
                              %a Jane Smith
                            %p.excerpt
                              Film festivals used to be do-or-die moments for movie makers. They were where you met the producers that could fund your project, and if the buyers liked your flick, they’d pay to Fast-forward and…
                              %a Read More
            .col-md-8.col-sm-8.col-xs-12
              .row
                .col-md-12.col-sm-12.col-xs-12
                  .x_panel
                    .x_title
                      %h2
                        Visitors location
                        %small geo-presentation
                      %ul.nav.navbar-right.panel_toolbox
                        %li
                          %a.collapse-link
                            %i.fa.fa-chevron-up
                        %li.dropdown
                          %a.dropdown-toggle{"aria-expanded" => "false", "data-toggle" => "dropdown", :href => "#", :role => "button"}
                            %i.fa.fa-wrench
                          %ul.dropdown-menu{:role => "menu"}
                            %li
                              %a{:href => "#"} Settings 1
                            %li
                              %a{:href => "#"} Settings 2
                        %li
                          %a.close-link
                            %i.fa.fa-close
                      .clearfix
                    .x_content
                      .dashboard-widget-content
                        .col-md-4.hidden-small
                          %h2.line_30 125.7k Views from 60 countries
                          %table.countries_list
                            %tbody
                              %tr
                                %td United States
                                %td.fs15.fw700.text-right 33%
                              %tr
                                %td France
                                %td.fs15.fw700.text-right 27%
                              %tr
                                %td Germany
                                %td.fs15.fw700.text-right 16%
                              %tr
                                %td Spain
                                %td.fs15.fw700.text-right 11%
                              %tr
                                %td Britain
                                %td.fs15.fw700.text-right 10%
                        #world-map-gdp.col-md-8.col-sm-12.col-xs-12{:style => "height:230px;"}
              .row
                / Start to do list
                .col-md-6.col-sm-6.col-xs-12
                  .x_panel
                    .x_title
                      %h2
                        To Do List
                        %small Sample tasks
                      %ul.nav.navbar-right.panel_toolbox
                        %li
                          %a.collapse-link
                            %i.fa.fa-chevron-up
                        %li.dropdown
                          %a.dropdown-toggle{"aria-expanded" => "false", "data-toggle" => "dropdown", :href => "#", :role => "button"}
                            %i.fa.fa-wrench
                          %ul.dropdown-menu{:role => "menu"}
                            %li
                              %a{:href => "#"} Settings 1
                            %li
                              %a{:href => "#"} Settings 2
                        %li
                          %a.close-link
                            %i.fa.fa-close
                      .clearfix
                    .x_content
                      %div
                        %ul.to_do
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Schedule meeting with new client
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Create email address for new intern
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Have IT fix the network printer
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Copy backups to offsite location
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Food truck fixie locavors mcsweeney
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Food truck fixie locavors mcsweeney
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Create email address for new intern
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Have IT fix the network printer
                          %li
                            %p
                              %input.flat{:type => "checkbox"}/
                              Copy backups to offsite location
                / End to do list
                / start of weather widget
                .col-md-6.col-sm-6.col-xs-12
                  .x_panel
                    .x_title
                      %h2
                        Daily active users
                        %small Sessions
                      %ul.nav.navbar-right.panel_toolbox
                        %li
                          %a.collapse-link
                            %i.fa.fa-chevron-up
                        %li.dropdown
                          %a.dropdown-toggle{"aria-expanded" => "false", "data-toggle" => "dropdown", :href => "#", :role => "button"}
                            %i.fa.fa-wrench
                          %ul.dropdown-menu{:role => "menu"}
                            %li
                              %a{:href => "#"} Settings 1
                            %li
                              %a{:href => "#"} Settings 2
                        %li
                          %a.close-link
                            %i.fa.fa-close
                      .clearfix
                    .x_content
                      .row
                        .col-sm-12
                          .temperature
                            %b> Monday
                            , 07:30 AM
                            %span F
                            %span
                              %b C
                      .row
                        .col-sm-4
                          .weather-icon
                            %canvas#partly-cloudy-day{:height => "84", :width => "84"}
                        .col-sm-8
                          .weather-text
                            %h2
                              Texas
                              %br/
                              %i Partly Cloudy Day
                      .col-sm-12
                        .weather-text.pull-right
                          %h3.degrees 23
                      .clearfix
                      .row.weather-days
                        .col-sm-2
                          .daily-weather
                            %h2.day Mon
                            %h3.degrees 25
                            %canvas#clear-day{:height => "32", :width => "32"}
                            %h5
                              15
                              %i km/h
                        .col-sm-2
                          .daily-weather
                            %h2.day Tue
                            %h3.degrees 25
                            %canvas#rain{:height => "32", :width => "32"}
                            %h5
                              12
                              %i km/h
                        .col-sm-2
                          .daily-weather
                            %h2.day Wed
                            %h3.degrees 27
                            %canvas#snow{:height => "32", :width => "32"}
                            %h5
                              14
                              %i km/h
                        .col-sm-2
                          .daily-weather
                            %h2.day Thu
                            %h3.degrees 28
                            %canvas#sleet{:height => "32", :width => "32"}
                            %h5
                              15
                              %i km/h
                        .col-sm-2
                          .daily-weather
                            %h2.day Fri
                            %h3.degrees 28
                            %canvas#wind{:height => "32", :width => "32"}
                            %h5
                              11
                              %i km/h
                        .col-sm-2
                          .daily-weather
                            %h2.day Sat
                            %h3.degrees 26
                            %canvas#cloudy{:height => "32", :width => "32"}
                            %h5
                              10
                              %i km/h
                        .clearfix
                / end of weather widget
        / /page content
        / footer content
        %footer
          .pull-right
            Gentelella - Bootstrap Admin Template by
            %a{:href => "https://colorlib.com"} Colorlib
          .clearfix
        / /footer content
    %script{:src => "assets/js/jquery/dist/jquery.min.js"}
    %script{:src => "assets/js/bootstrap/dist/js/bootstrap.min.js"}
    %script{:src => "assets/js/fastclick/lib/fastclick.js"}
    %script{:src => "assets/js/nprogress/nprogress.js"}
    %script{:src => "assets/js/Chart.js/dist/Chart.min.js"}
    %script{:src => "assets/js/gauge.js/dist/gauge.min.js"}
    %script{:src => "assets/js/bootstrap-progressbar/bootstrap-progressbar.min.js"}
    %script{:src => "assets/js/iCheck/icheck.min.js"}
    %script{:src => "assets/js/skycons/skycons.js"}
    %script{:src => "assets/js/Flot/jquery.flot.js"}
    %script{:src => "assets/js/Flot/jquery.flot.pie.js"}
    %script{:src => "assets/js/Flot/jquery.flot.time.js"}
    %script{:src => "assets/js/Flot/jquery.flot.stack.js"}
    %script{:src => "assets/js/Flot/jquery.flot.resize.js"}
    %script{:src => "assets/js/flot.orderbars/js/jquery.flot.orderBars.js"}
    %script{:src => "assets/js/flot-spline/js/jquery.flot.spline.min.js"}
    %script{:src => "assets/js/flot.curvedlines/curvedLines.js"}
    %script{:src => "assets/js/DateJS/build/date.js"}
    %script{:src => "assets/js/jqvmap/dist/jquery.vmap.js"}
    %script{:src => "assets/js/jqvmap/dist/maps/jquery.vmap.world.js"}
    %script{:src => "assets/js/jqvmap/examples/js/jquery.vmap.sampledata.js"}
    %script{:src => "assets/js/moment/min/moment.min.js"}
    %script{:src => "assets/js/bootstrap-daterangepicker/daterangepicker.js"}
    %script{:src => "assets/js/custom.min.js"}

    %script{:src => "assets/js/percircle.js"}

    :javascript
      $(function(){
          $("#repeated-indexes-percent, #missing-foreign-keys-percent, #incompatibility-structure-percent, #unindexed-foreign-keys-percent").percircle();
      });

      function init_chart_doughnut(){

        if( typeof (Chart) === 'undefined'){ return; }
        if ($('#most_populars_errors').length){
          var chart_doughnut_settings = {
            type: 'doughnut',
            tooltipFillColor: "rgba(51, 51, 51, 0.55)",
            data: {
              labels: #{presenter.top_types_of_errors(5).map{|x| x[:error_name]}},
              datasets: [
                {
                  data: #{presenter.top_types_of_errors(5).map{|x| x[:tables_count]}},
                  backgroundColor: [
                    "#BDC3C7",
                    "#9B59B6",
                    "#E74C3C",
                    "#26B99A",
                    "#3498DB"
                  ],
                  hoverBackgroundColor: [
                    "#CFD4D8",
                    "#B370CF",
                    "#E95E4F",
                    "#36CAAB",
                    "#49A9EA"
                  ]
                }
              ]
            },
            options: {
            legend: false,
            responsive: false
            }
          }

          var chart_element = $('#most_populars_errors');
          var chart_doughnut = new Chart( chart_element, chart_doughnut_settings);

          }

          }
